apiVersion: v1
kind: ConfigMap
metadata:
  name: nested-values
  namespace: default
data:
  values.yaml: |
    replicaCount: 2
    image:
      repository: nginx
      tag: "1.21.0"
      pullPolicy: Always
    service:
      type: LoadBalancer
      port: 8080
      annotations:
        service.beta.kubernetes.io/aws-load-balancer-type: nlb
        prometheus.io/scrape: "true"
    resources:
      limits:
        cpu: 500m
        memory: 512Mi
      requests:
        cpu: 250m
        memory: 256Mi
    env:
      - name: APP_ENV
        value: production
      - name: LOG_LEVEL
        value: debug
  app-config.yaml: |
    server:
      port: 8080
      host: 0.0.0.0
      timeout: 30s
    database:
      pool:
        min: 5
        max: 20
      timeout: 30s
    features:
      enableFeatureA: true
      enableFeatureB: false
