# Go Lint Licenses Configuration Schema

## Overview

This document describes the configuration options for `go-lint-licenses` in `forge.yaml`. The go-lint-licenses engine verifies that all Go source files have proper license headers.

## Basic Configuration

```yaml
test:
  - name: verify-license
    runner: go://go-lint-licenses
```

## Configuration Options

### Required Fields

| Field | Type | Description |
|-------|------|-------------|
| `name` | string | The name of the verification stage. |
| `runner` | string | Must be `go://go-lint-licenses` to use this verifier. |

### Optional Fields

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `stage` | string | Same as `name` | The test stage name. |
| `rootDir` | string | `.` | Root directory to scan for Go files. |

## Examples

### Minimal Configuration

```yaml
test:
  - name: verify-license
    runner: go://go-lint-licenses
```

### With Custom Root Directory

```yaml
test:
  - name: verify-license
    runner: go://go-lint-licenses
    rootDir: ./src
```

### Combined with Other Linters

```yaml
test:
  - name: lint
    runner: go://go-lint

  - name: verify-tags
    runner: go://go-lint-tags

  - name: verify-license
    runner: go://go-lint-licenses
```

### In Parallel Test Runner

```yaml
test:
  - name: code-quality
    runner: go://parallel-test-runner
    spec:
      runners:
        - name: lint
          engine: go://go-lint
        - name: verify-tags
          engine: go://go-lint-tags
        - name: verify-license
          engine: go://go-lint-licenses
```

## Accepted License Patterns

The verifier accepts the following patterns in the first 15 lines:

| Pattern | Example |
|---------|---------|
| `// Copyright` | `// Copyright 2024 Company Name` |
| `// SPDX-License-Identifier` | `// SPDX-License-Identifier: Apache-2.0` |
| `// Licensed under` | `// Licensed under the MIT License` |

## Skipped Files

The following files are automatically skipped:

### Generated Files

Files starting with `// Code generated` are skipped:

```go
// Code generated by protoc-gen-go. DO NOT EDIT.
```

### Skipped Directories

- `vendor/`
- `.git/`
- `.tmp/`
- `node_modules/`

## Generated Artifacts

Each verification run creates a TestReport in the artifact store:

```yaml
testReports:
  - id: "test-verify-license-verify-license-20250106-abc123"
    stage: "verify-license"
    status: "passed"
    startTime: "2025-01-06T10:00:00Z"
    duration: 0.123
    testStats:
      total: 150     # Total Go files found
      passed: 150    # Files with license headers
      failed: 0      # Files without headers
      skipped: 0
    coverage:
      enabled: false
      percentage: 0
```

## Default Behavior

When running go-lint-licenses:

- Scans from current directory (or specified rootDir)
- Checks all `*.go` files
- Skips generated files
- Reports missing license headers
- Exits with failure if any files lack headers

## See Also

- [Go Lint Licenses Usage Guide](usage.md)
- [SPDX License Identifiers](https://spdx.org/licenses/)
